#include "Application.h"
#include "Fourier.h"

//#define TEST_DFT
#define USE_COMPILE_TIME_DFT

int main(int argc, char* argv[]) {
#ifdef TEST_DFT
	using x = ComplexList<
		Complex<1., 0.>,	// --DFT--> 0.5
		Complex<2., -1.>,	// --DFT--> -0.5-0.5i
		Complex<0., -1.>,	// --DFT--> -0.5i
		Complex<-1., 2.>	// --DFT--> 1+1i
	>;

	using X = Fourier::DftResult<x>;
	printComplexList(X{});
#else
#ifdef USE_COMPILE_TIME_DFT
	using x = ComplexList <
		Complex<196.9, 228.8>,
		Complex<195.1, 192.7>,
		Complex<224.7, 186.6>,
		Complex<234.5, 165.5>,
		Complex<257.7, 162.2>,
		Complex<251.1, 126.5>,
		Complex<246.5, 90.7>,
		Complex<275.4, 84.1>,
		Complex<284.8, 118.7>,
		Complex<291.5, 154.4>,
		Complex<298.3, 190.1>,
		Complex<306.5, 155.7>,
		Complex<314.8, 120.3>,
		Complex<325.5, 86.1>,
		Complex<355.2, 93.1>,
		Complex<349.2, 128.6>,
		Complex<340.9, 164.>,
		Complex<332.7, 199.4>,
		Complex<348.2, 227.8>,
		Complex<349.2, 263.6>,
		Complex<332.5, 295.3>,
		Complex<302.9, 315.7>,
		Complex<267.2, 320.8>,
		Complex<232.5, 311.3>,
		Complex<207.9, 285.5>,
		Complex<198.4, 250.6>
	> ;

	const std::vector<std::complex<double>> X = convertComplexList(Fourier::DftResult<x>{});
#else
	const std::vector<std::complex<double>> x = {
		{196.9, 228.8},
		{196.7, 225.2},
		{196.6, 221.6},
		{196.3, 218},
		{195.9, 214.3},
		{195.5, 210.7},
		{195.1, 207.1},
		{194.7, 203.5},
		{194.3, 199.9},
		{194.3, 196.3},
		{195.1, 192.7},
		{196.7, 189.5},
		{198.9, 186.6},
		{201.7, 184.3},
		{204.9, 182.6},
		{208.4, 181.6},
		{212, 181.3},
		{215.6, 181.7},
		{219, 182.9},
		{221.9, 184.3},
		{224.7, 186.6},
		{226.9, 189.5},
		{228.2, 192},
		{227.8, 188.4},
		{227.4, 184.7},
		{227, 181.1},
		{227, 177.5},
		{227.9, 174},
		{229.5, 170.7},
		{231.7, 167.9},
		{234.5, 165.5},
		{237.6, 163.8},
		{241.1, 162.8},
		{244.8, 162.5},
		{248.4, 162.9},
		{251.8, 164},
		{254.9, 165.8},
		{257.6, 168.3},
		{259.1, 169.3},
		{258.4, 165.7},
		{257.7, 162.2},
		{257.1, 158.6},
		{256.4, 155},
		{255.7, 151.4},
		{255.1, 147.9},
		{254.4, 144.3},
		{253.7, 140.7},
		{253.1, 137.2},
		{252.4, 133.6},
		{251.8, 130},
		{251.1, 126.5},
		{250.4, 122.9},
		{249.8, 119.3},
		{249.1, 115.7},
		{248.4, 112.2},
		{247.8, 108.6},
		{247.1, 105},
		{246.4, 101.5},
		{245.8, 97.9},
		{245.7, 94.3},
		{246.5, 90.7},
		{248.1, 87.5},
		{250.3, 84.6},
		{253.1, 82.2},
		{256.3, 80.5},
		{259.7, 79.6},
		{263.2, 79.2},
		{265.9, 79.2},
		{269.4, 80.1},
		{272.6, 81.7},
		{275.4, 84.1},
		{277.6, 87},
		{279.1, 90.2},
		{280.1, 93.7},
		{280.7, 97.3},
		{281.4, 100.9},
		{282.1, 104.4},
		{282.8, 108},
		{283.4, 111.6},
		{284.1, 115.1},
		{284.8, 118.7},
		{285.5, 122.3},
		{286.1, 125.8},
		{286.8, 129.4},
		{287.5, 133},
		{288.2, 136.6},
		{288.8, 140.1},
		{289.5, 143.7},
		{290.2, 147.3},
		{290.9, 150.8},
		{291.5, 154.4},
		{292.2, 158},
		{292.9, 161.5},
		{293.6, 165.1},
		{294.3, 168.7},
		{294.9, 172.2},
		{295.6, 175.8},
		{296.3, 179.4},
		{297, 182.9},
		{297.6, 186.5},
		{298.3, 190.1},
		{299.1, 187.5},
		{299.9, 184},
		{300.8, 180.4},
		{301.6, 176.9},
		{302.4, 173.3},
		{303.2, 169.8},
		{304.1, 166.3},
		{304.9, 162.7},
		{305.7, 159.2},
		{306.5, 155.7},
		{307.3, 152.1},
		{308.2, 148.6},
		{309, 145},
		{309.8, 141.5},
		{310.6, 138},
		{311.5, 134.4},
		{312.3, 130.9},
		{313.1, 127.4},
		{313.9, 123.8},
		{314.8, 120.3},
		{315.6, 116.8},
		{316.4, 113.2},
		{317.2, 109.7},
		{318, 106.1},
		{318.9, 102.6},
		{319.7, 99.1},
		{320.5, 95.5},
		{321.5, 92},
		{323.1, 88.8},
		{325.5, 86.1},
		{328.4, 83.9},
		{331.6, 82.3},
		{335.2, 81.4},
		{338.8, 81.2},
		{342.4, 81.8},
		{345.7, 83.1},
		{348.7, 84.6},
		{351.6, 86.9},
		{353.8, 89.7},
		{355.2, 93.1},
		{355.7, 96.7},
		{355.6, 100.3},
		{354.9, 103.9},
		{354.1, 107.4},
		{353.3, 110.9},
		{352.4, 114.5},
		{351.6, 118},
		{350.8, 121.5},
		{350, 125.1},
		{349.2, 128.6},
		{348.3, 132.2},
		{347.5, 135.7},
		{346.7, 139.2},
		{345.9, 142.8},
		{345, 146.3},
		{344.2, 149.8},
		{343.4, 153.4},
		{342.6, 156.9},
		{341.8, 160.5},
		{340.9, 164},
		{340.1, 167.5},
		{339.3, 171.1},
		{338.5, 174.6},
		{337.7, 178.1},
		{336.8, 181.7},
		{336, 185.2},
		{335.2, 188.8},
		{334.4, 192.3},
		{333.5, 195.8},
		{332.7, 199.4},
		{331.9, 202.9},
		{331.1, 206.4},
		{332.7, 208.8},
		{335.9, 210.6},
		{338.9, 212.6},
		{341.6, 215},
		{343.8, 217.9},
		{345.6, 221.1},
		{347, 224.4},
		{348.2, 227.8},
		{349.2, 231.3},
		{350, 234.9},
		{350.7, 238.4},
		{351.1, 242},
		{351.4, 245.6},
		{351.5, 249.3},
		{351.3, 252.9},
		{350.9, 256.5},
		{350.2, 260.1},
		{349.2, 263.6},
		{348, 267},
		{346.8, 270.4},
		{345.4, 273.8},
		{343.9, 277.1},
		{342.5, 280.4},
		{341, 283.7},
		{339.4, 287},
		{336.9, 289.5},
		{334.7, 292.5},
		{332.5, 295.3},
		{330.1, 298},
		{327.5, 300.6},
		{324.8, 303},
		{322, 305.3},
		{319.1, 307.5},
		{316, 309.4},
		{312.9, 311.2},
		{309.6, 312.9},
		{306.3, 314.4},
		{302.9, 315.7},
		{299.5, 316.8},
		{296, 317.8},
		{292.5, 318.7},
		{288.9, 319.4},
		{285.3, 320},
		{281.7, 320.4},
		{278.1, 320.7},
		{274.5, 320.9},
		{270.8, 321},
		{267.2, 320.8},
		{263.6, 320.6},
		{260, 320.2},
		{256.4, 319.6},
		{252.8, 318.8},
		{249.3, 318},
		{245.8, 316.9},
		{242.4, 315.7},
		{239, 314.4},
		{235.7, 312.9},
		{232.5, 311.3},
		{229.3, 309.5},
		{226.3, 307.5},
		{223.3, 305.4},
		{220.6, 303},
		{217.9, 300.5},
		{215.5, 297.8},
		{213.3, 294.9},
		{211.3, 291.9},
		{209.5, 288.7},
		{207.9, 285.5},
		{206.5, 282.1},
		{205.2, 278.8},
		{204, 275.3},
		{202.9, 271.9},
		{202, 268.4},
		{201.1, 264.8},
		{200.3, 261.3},
		{199.6, 257.7},
		{199, 254.1},
		{198.4, 250.6},
		{198, 247},
		{197.6, 243.3},
		{197.4, 239.7},
		{197.3, 236.1},
		{197.1, 232.5},
	};

	const std::vector<std::complex<double>> X = Fourier::dft(x);
#endif
	for (const auto& c : X) {
		std::cout << c << '\n';
	}

	Application app("Fourier Drawing", 640, 480);

	if (app.init()) app.run(X);
#endif

	return 0;
}
